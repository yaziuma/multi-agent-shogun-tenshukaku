{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- æŒ‡ç¤ºå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
    <section class="command-input">
        <h2>ğŸ“ æŒ‡ç¤ºå…¥åŠ›</h2>
        <form hx-post="/api/command" hx-target="#command-result" hx-swap="innerHTML">
            <textarea name="instruction" rows="5" placeholder="å®¶è€ã¸ã®æŒ‡ç¤ºã‚’å…¥åŠ›..."></textarea>
            <button type="submit">é€ä¿¡</button>
        </form>
        <div id="command-result"></div>
    </section>

    <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡ºåŠ›è¡¨ç¤ºï¼ˆWebSocketï¼‰ -->
    <section class="realtime-output" hx-ext="ws" ws-connect="/ws">
        <h2>ğŸ”„ å®¶è€ãƒšã‚¤ãƒ³å‡ºåŠ›</h2>
        <div id="karo-output" class="terminal">
            <!-- WebSocketçµŒç”±ã§æ›´æ–°ã•ã‚Œã‚‹ -->
        </div>
    </section>

    <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º -->
    <section class="dashboard">
        <h2>ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
        <div hx-get="/api/dashboard" hx-trigger="load, every 5s" hx-swap="innerHTML">
            Loading...
        </div>
    </section>

    <!-- ã‚³ãƒãƒ³ãƒ‰å±¥æ­´ -->
    <section class="command-history">
        <h2>ğŸ“œ ã‚³ãƒãƒ³ãƒ‰å±¥æ­´</h2>
        {% include "partials/history.html" %}
    </section>
</div>
{% endblock %}
